(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[11],{"1d4e":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".inSettings[data-v-427ff171]{margin:30px auto;display:block}.chatIconWrapper[data-v-427ff171]{width:120px}.linkPlace[data-v-427ff171]{margin-top:30px;padding:.5em 0;cursor:pointer;border-top:1px solid rgb(var(--background-main))}.linkPlace span[data-v-427ff171]{font-size:1em;display:block;text-align:left;max-width:400px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.linkPlace .shareLink[data-v-427ff171]:hover{color:rgb(var(--color-txt-ac))}.chatSettingAbout[data-v-427ff171]{padding:1em 0}.chatSettingAbout .chatNameEdit[data-v-427ff171]{margin-top:1em}.chatSettingAbout .chatNameEdit input[data-v-427ff171]{padding:1em;display:block;width:100%}.chatSettingAbout .chatNameEdit input[data-v-427ff171],.chatSettingAbout .chatNameEdit input[data-v-427ff171]:focus{border-bottom:1px solid rgb(var(--neutral-grad-1));border-top:1px solid rgb(var(--neutral-grad-1))}.chatSettingAbout .chatDescription textarea[data-v-427ff171]{font-size:.9em;display:block;width:100%;resize:none;padding:1em}.chatIconWrapper[data-v-427ff171]{width:90%;margin:0 auto;padding:.5em 0}.chatIconWrapper[data-v-427ff171] .swiperWrapperFlex .imageSwiper{width:100px;height:100px;line-height:100px}.chatIconWrapper[data-v-427ff171] .swiperWrapperFlex{padding-bottom:1em}.chatIconWrapper[data-v-427ff171] .fourAvatars,.chatIconWrapper[data-v-427ff171] .threeAvatars,.chatIconWrapper[data-v-427ff171] .twoAvatars{width:50%;padding-bottom:50%;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7);background:rgba(var(--background-total-theme),.3)}.chatIconWrapper[data-v-427ff171] .oneuser{width:50%;margin:0 auto}.chatIconWrapper[data-v-427ff171] .bgimage{box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.minimized:not(.active) .chatDescription[data-v-427ff171],.minimized:not(.active) .chatNameEdit[data-v-427ff171]{display:none}.minimized[data-v-427ff171]:not(.active) .chatIconWrapper{width:52px;margin:0}",""]),t.exports=a},"7bc6":function(t,a,e){"use strict";e.r(a);var i=e("e9a5");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o)},9394:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return t.chat?a("div",{staticClass:"page"},[a("topheader",{staticClass:"topheader"}),a("maincontent",{scopedSlots:t._u([{key:"content",fn:function(){return[a("settings",{attrs:{chat:t.chat}})]},proxy:!0}],null,!1,32150248)})],1):t._e()},o=[],n=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"chatTopheader"}},[a("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[a("backButton",{attrs:{action:"back"}})]},proxy:!0},{key:"info",fn:function(){return[a("span",[t._v(t._s(t.$t("caption.settings")))])]},proxy:!0},{key:"right",fn:function(){},proxy:!0}])})],1)},r=[],c={methods:{}},s=c,p=e("2877"),d=Object(p["a"])(s,n,r,!1,null,null,null,!0),l=d.exports,h=function(){var t=this,a=t._self._c;t._self._setupProxy;return a("div",{class:{minimized:t.minimized,active:t.active},attrs:{id:"chatSettings"}},[a("div",{staticClass:"chatSettingAbout"},[a("div",{class:{chatIconWrapper:"chatIconWrapper",noSwipe:!0}},[t._m(0),a("input",{staticClass:"chatIconFile",attrs:{type:"file",id:"roomImage",accept:"image/*"},on:{change:t.handleImage}}),a("chatIcon",{attrs:{slidesPerView:4,dontuseslides:t.minimized&&!t.active,chat:t.chat,m_chat:t.m_chat,hideunseen:!0}}),t.userImagebase64?a("img",{staticClass:"userImagebase64",attrs:{src:t.userImagebase64,alt:""}}):t._e()],1),a("div",{staticClass:"chatNameEdit"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.m_chat.name,expression:"m_chat.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.m_chat.name},on:{input:function(a){a.target.composing||t.$set(t.m_chat,"name",a.target.value)}}})]),t.topic?a("div",{staticClass:"chatDescription"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.topicTxt,expression:"topicTxt"}],attrs:{type:"text",placeholder:"Description",maxlength:"1000"},domProps:{value:t.topicTxt},on:{input:function(a){a.target.composing||(t.topicTxt=a.target.value)}}})]):t._e(),a("button",{staticClass:"button small rounded inSettings",on:{click:function(a){return t.saveEdited()}}},[t._v(" "+t._s(t.$t("button.save"))+" ")])])])},m=[function(){var t=this,a=t._self._c;t._self._setupProxy;return a("label",{staticClass:"chatIconEditImage",attrs:{for:"roomImage"}},[a("i",{staticClass:"fas fa-camera"})])}],u=e("2f62"),f=e("3094"),v={data:()=>({pubChat:Object,topicTxt:"",topic:!1,userImagebase64:null}),props:{chat:Object,saveClicked:!1},components:{chatIcon:f["a"]},computed:Object(u["c"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,auth:t=>t.auth,m_chat:function(){return this.core.mtrx.client.getRoom(this.chat.roomId)},shareRoomLink:function(){return`https://${this.core.domain}/publicPreview/welcome?connect=${this.chat.roomId.replace("!","%")}`}}),mounted(){var t;const a=null===(t=this.m_chat.currentState.getStateEvents("m.room.avatar")[0])||void 0===t?void 0:t.event.content.avatarUrl;this.userImagebase64=""!==a?a:null,"public"===this.m_chat.getJoinRule()&&(this.getPublicRoom(),this.topic=!0)},methods:{saveEdited(){this.core.mtrx.client.setRoomAvatarUrl(this.m_chat.roomId,this.userImagebase64),this.core.mtrx.client.setRoomName(this.m_chat.roomId,"@"+this.m_chat.name.replace(/[@]*/g,"")),this.core.mtrx.client.setRoomTopic(this.chat.roomId,this.topicTxt.replace(/ /g,"_")).then(t=>t)},getPublicRoom(){this.core.mtrx.client.publicRooms().then(t=>{this.pubChat=t.chunk.filter(t=>t.room_id===this.chat.roomId)[0],this.pubChat["topic"]&&(this.topicTxt=this.pubChat["topic"].replace(/_/g," "))})},handleImage(t){const a=t.target.files[0];this.createBase64Image(a)},createBase64Image(t){const a=new FileReader;a.onload=t=>{this.userImagebase64=t.target.result},a.readAsDataURL(t)}}},g=v;function b(t){var a=e("7bc6");a.__inject__&&a.__inject__(t);var i=e("e3e1");i.__inject__&&i.__inject__(t)}var x=Object(p["a"])(g,h,m,!1,b,"427ff171",null,!0),_=x.exports,I={name:"chatSettings",data:function(){return{}},components:{topheader:l,settings:_},computed:{chat(){return this.$store.state.chatsMap[this.$route.query.id.replace("%","!")]}},methods:{}},w=I,y=Object(p["a"])(w,i,o,!1,null,null,null,!0);a["default"]=y.exports},b840:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".chatGroupIcon img{width:50%!important}.chatIconWrapper{position:relative}.chatIconWrapper img{height:calc(100% - 17px);-o-object-fit:cover;object-fit:cover;border-radius:50%;top:9px}.chatIconEditImage,.chatIconWrapper img{width:50%;position:absolute;left:50%;transform:translateX(-50%)}.chatIconEditImage{top:0;height:100%;z-index:200;opacity:.9;display:flex;align-items:center;flex-direction:column;justify-content:center}.chatIconEditImage i{transform:scale(2);color:rgb(var(--color-bg-ac))}.chatIconFile{display:none}.userImagebase64{z-index:150}",""]),t.exports=a},e3e1:function(t,a,e){"use strict";e.r(a);var i=e("eaaa");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o)},e9a5:function(t,a,e){var i=e("1d4e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("35d6").default;t.exports.__inject__=function(t){o("450eeb2b",i,t)}},eaaa:function(t,a,e){var i=e("b840");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("35d6").default;t.exports.__inject__=function(t){o("6523a4d4",i,t)}}}]);
//# sourceMappingURL=matrix-element.11.min.js.map