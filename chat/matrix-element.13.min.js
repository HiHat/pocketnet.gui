(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[13],{"17f7":function(t,e,a){var i=a("d123");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("1ab679be",i,t)}},"1af7":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".chatswrapper[data-v-29e16303]{padding-top:.25em}.section-title[data-v-29e16303]{background:rgb(var(--background-secondary-theme));color:rgb(var(--text-color));margin:.5em 0;padding:.5em .5em;width:100%;text-align:center}.section-title span[data-v-29e16303]{font-size:.8em;font-weight:700}.contact[data-v-29e16303]{cursor:pointer}.show-more[data-v-29e16303]{text-align:center}.show-more a[data-v-29e16303]{color:#00a4ff}.empty[data-v-29e16303],.preloaderWrapperLine[data-v-29e16303]{text-align:center;padding:1em}.empty[data-v-29e16303]{margin-top:2em}.empty span[data-v-29e16303]{font-size:2em;font-weight:100}",""]),t.exports=e},"30cc":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".scroller[data-v-b63c01ea]{margin-top:8px}.chats-list .searchWrapperEA[data-v-b63c01ea]{margin-top:.5em}#simpleSearch[data-v-b63c01ea]{margin-left:.25em;margin-right:.25em}.removeRoom[data-v-b63c01ea]{width:62px;height:100%;background:rgb(var(--color-bad));border-radius:3px}.removeRoom i[data-v-b63c01ea]{color:#fff}.chatsearchingempty[data-v-b63c01ea]{padding:2em;text-align:center}.chatsearchingempty span[data-v-b63c01ea]{font-size:1.5em;font-weight:100}.generatekeys[data-v-b63c01ea],.inviteUserDiv[data-v-b63c01ea]{margin-top:.5em;margin-bottom:1em}.generatekeys .generatekeysButton[data-v-b63c01ea],.generatekeys .inviteButton[data-v-b63c01ea],.inviteUserDiv .generatekeysButton[data-v-b63c01ea],.inviteUserDiv .inviteButton[data-v-b63c01ea]{background-color:rgb(var(--color-bg-orange));color:#fff;width:100%;height:34px;font-size:.9em;border-radius:30px;position:relative;cursor:pointer}.generatekeys .generatekeysButton i[data-v-b63c01ea],.generatekeys .inviteButton i[data-v-b63c01ea],.inviteUserDiv .generatekeysButton i[data-v-b63c01ea],.inviteUserDiv .inviteButton i[data-v-b63c01ea]{position:absolute;right:0;top:0;line-height:34px;width:50px;text-align:center}.desktopList .card-content[data-v-b63c01ea]{position:absolute;width:100%;left:0;right:0;height:60px}.bout .desktopList .card-content[data-v-b63c01ea]{height:70px;contain:strict}.selectedForShare[data-v-b63c01ea]{background:rgba(var(--color-shadow-base),.8)!important}.selectedForShare .paddingwrapper[data-v-b63c01ea]{position:absolute;left:50px;top:100px;bottom:100px;right:50px;overflow:hidden;border-radius:50%}.selectedForShare .paddingwrapper .chatwrapper[data-v-b63c01ea]{position:absolute;background:rgb(var(--background-total-theme));left:-50px;top:-100px;bottom:-100px;right:-50px}.selectedForShare[data-v-b63c01ea] .chatInputWrapper{display:none}.previewWrapper[data-v-b63c01ea]:last-child{border-bottom:0}.swipeout-list[data-v-b63c01ea]{display:flex;flex-direction:column}.startnewchat[data-v-b63c01ea],.unauthorized[data-v-b63c01ea]{padding:2em 0;text-align:center}.startnewchat .buttonWrapper[data-v-b63c01ea],.unauthorized .buttonWrapper[data-v-b63c01ea]{padding:1em}.startnewchat .captionWrapper[data-v-b63c01ea],.unauthorized .captionWrapper[data-v-b63c01ea]{padding:1em;text-align:center}.startnewchat .captionWrapper span[data-v-b63c01ea],.unauthorized .captionWrapper span[data-v-b63c01ea]{font-size:1.5em;font-weight:100}.card[data-v-b63c01ea]{width:100%;border-radius:3px}.inviteUserDivWrapper[data-v-b63c01ea]{transition:.3s}.chats-list.minimized:not(.active) .inviteUserDivWrapper[data-v-b63c01ea],.chats-list.minimized:not(.active) .startnewchat[data-v-b63c01ea],.chats-list.minimized:not(.active) .unauthorized[data-v-b63c01ea],.unauthorized.minimized[data-v-b63c01ea]:not(.active){display:none}.list-enter-active[data-v-b63c01ea],.list-leave-active[data-v-b63c01ea]{transition:all .5s ease}.list-enter-from[data-v-b63c01ea],.list-leave-to[data-v-b63c01ea]{opacity:0;transform:translateX(30px)}.fade-enter-active[data-v-b63c01ea],.fade-leave-active[data-v-b63c01ea]{transition:opacity .3s ease}.fade-enter-from[data-v-b63c01ea],.fade-leave-to[data-v-b63c01ea]{opacity:0}.card-content.active[data-v-b63c01ea]{background-color:rgba(var(--neutral-grad-0),.5)}",""]),t.exports=e},"62f7":function(t,e,a){var i=a("a526");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("67e40b9c",i,t)}},"633f":function(t,e,a){var i=a("e15c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("76579029",i,t)}},6985:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".card-content .chatGroupIcon img{width:100%!important}",""]),t.exports=e},"7e83":function(t,e,a){"use strict";a.r(e);var i=a("633f");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},8509:function(t,e,a){"use strict";a.r(e);var i=a("b410");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"8e32":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#teamroom.mobile[data-v-7df18b93]{margin-bottom:10px}#teamroom[data-v-7df18b93]:hover{cursor:pointer}#teamroom .teamChatWrapper[data-v-7df18b93]{padding:.5em .25em;display:flex;align-items:center;transition:.3s}#teamroom .teamChatWrapper .iconWrapper[data-v-7df18b93]{width:44px;display:flex;align-items:center;min-width:44px;height:44px;position:relative}#teamroom .teamChatWrapper .iconWrapper .logo[data-v-7df18b93]{background-size:cover;background-position:50%;background-repeat:no-repeat;height:44px;width:44px;margin-left:0;margin-top:0;position:absolute;background:rgb(var(--text-on-bg-ac-color));border-radius:50%;padding-top:8px;text-align:center}#teamroom .teamChatWrapper .iconWrapper .logo img[data-v-7df18b93]{width:28px;height:28px;margin:0 auto}#teamroom .teamChatWrapper .iconWrapper .unseen[data-v-7df18b93]{background:rgba(var(--color-bg-ac),.9);color:rgb(var(--text-on-bg-ac-color));position:absolute;width:22px;height:22px;right:-10%;top:-10%;line-height:22px;text-align:center;font-weight:500;border-radius:50%;z-index:2;font-size:.6em}#teamroom .teamChatWrapper .infoWrapper[data-v-7df18b93]{padding-left:.5em}#teamroom .teamChatWrapper .infoWrapper>div[data-v-7df18b93]{display:flex;align-content:center}#teamroom .teamChatWrapper .infoWrapper .infoName span[data-v-7df18b93]{font-size:.9em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700;display:inline-block;max-width:190px;color:rgb(var(--text-color))}#teamroom .teamChatWrapper .infoWrapper .previewMessage[data-v-7df18b93]{display:flex;justify-content:flex-start;align-items:center;width:100%}#teamroom .teamChatWrapper .infoWrapper .previewMessage span[data-v-7df18b93]{display:block;color:rgb(var(--color-txt-gray));font-size:.9em;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:left;max-width:210px}#teamroom.minimized:not(.active) .teamChatWrapper[data-v-7df18b93]{padding:.5em 0}",""]),t.exports=e},"8fcc":function(t,e,a){"use strict";a.r(e);var i=a("e2ab");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"9a41":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page chats",class:{pocketnet:t.pocketnet,mobile:t.mobile,minimized:t.minimized,active:t.active,newChat:t.newChat},staticStyle:{display:"flex"},attrs:{"data-viewtype":t.viewType,"data-is-opened-chat":t.isOpenedChat}},[e("div",{attrs:{id:"ChatList"}},[e("topheader",{staticClass:"topheader",attrs:{share:t.share},on:{newchat:t.newchat}}),e("maincontent",{ref:"maincontent",attrs:{rbackexp:!0},scopedSlots:t._u([{key:"content",fn:function(){return[e("list",{attrs:{share:t.share,activeRoomId:t.activeRoomId,processid:t.processid},on:{scrolltop:t.scrolltop}}),e("transition",{attrs:{name:"fademodal"}},[t.newChat&&!t.hiddenInParent?e("modal",{on:{close:t.closeNewChat},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(t._s(t.$t("caption.newChat")))]},proxy:!0},{key:"body",fn:function(){return[e("chatcreate",{on:{completed:t.chatcreated}})]},proxy:!0},{key:"footer",fn:function(){},proxy:!0}],null,!1,1284178828)}):t._e()],1)]},proxy:!0}])})],1),e("div",{attrs:{id:"ChatContent"}},[e("transition",{attrs:{name:"fade"}},[e("router-view",{key:t.activeRoomId})],1)],1)])},s=[],o=(a("14d9"),function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chats-list",class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active,empty:t.empty}},[t.unauthorized?e("div",{staticClass:"dmdv"}):e("div",[!t.minimized||t.active?e("div",{staticClass:"searchWrapperEA"},[e("simpleSearch",{attrs:{value:t.globalsearch},on:{search:t.searchall}})],1):t._e(),!t.matches.value&&this.chats.length<=2&&!0===t.chatsready?e("teamroom",{on:{click:t.openTeamRoom}}):t._e(),!0!==t.chatsready?e("div",{staticClass:"listChatLoading"},[e("dummypreviews")],1):e("div",{staticClass:"Swipes"},[e("div",{staticClass:"desktopList"},[t.globalsearch?e("div",{staticClass:"searchresults"},[e("AllContacts",{attrs:{chats:t.chats,search:t.globalsearch},on:{clearsearch:()=>t.searchall("")}})],1):e("div",{staticClass:"chatswrapper"},[e("RecycleScroller",{staticClass:"scroller",attrs:{"page-mode":"",items:t.chats,"item-size":t.pocketnet?60:70,keyField:"key",buffer:400},on:{update:t.onScrollerResize},scopedSlots:t._u([{key:"default",fn:function({item:a}){return[e("div",{staticClass:"card-content",class:[t.activeRoomId===a.roomId&&"active"],attrs:{chatkey:a.key},on:{click:e=>t.itemClick(a)}},[e("preview",{attrs:{chat:a}})],1)]}}],null,!1,1454538732)})],1)])])],1)])}),r=[],n=a("2f62"),c=a("a54c"),d=a("087d"),h=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chatswrapper"},[t._l(t.filteredLists,(function({items:a,section:i}){return a.length?e("section",{staticClass:"chats"},[e("div",{staticClass:"section-title"},[e("span",[t._v(t._s(t.$t("caption."+i.key)))])]),t._l(a,(function(a){return e("div",{key:a.roomId||a.id,staticClass:"card-content",on:{click:function(e){return t.itemClick(a,i)}}},["room"==i.view?e("previewRoom",{staticClass:"room",attrs:{chat:a}}):t._e(),"roomWithMessage"==i.view?e("previewRoom",{staticClass:"room",attrs:{chat:a.chat,messages:a.messages}}):t._e(),"contact"==i.view?e("previewContact",{staticClass:"contact",attrs:{contact:a,mode:t.mode}}):t._e()],1)}))],2):t._e()})),t.loadedingUsers[t.search]||t.processing?e("div",{staticClass:"preloaderWrapperLine"},[e("linepreloader")],1):t._e(),!t.filteredListsEmpty||t.loadedingUsers[t.search]||t.processing?t._e():e("div",{staticClass:"empty"},[e("span",[t._v(t._s(t.$t("caption.queryNoResults"))+": "+t._s(t.search))])])],2)},l=[],p=(a("13d5"),a("92a6")),m={name:"allContacts",components:{previewRoom:d["a"],previewContact:p["a"]},props:{chats:Array,search:String,mode:{default:"",type:String}},data:function(){return{loading:!1,loadedUsers:{},loadedingUsers:{},users:[],contacts:[],lists:[{key:"chats",view:"room",action:"navigateToRoom"},{key:"contacts",view:"contact",action:"navigateToProfile"},{key:"other",view:"contact",action:"navigateToProfile"},{key:"messages",view:"roomWithMessage",keepMatches:!0,action:"navigateToRoomFromMsg"}],processresult:null,searchChanged:!0,processing:!1}},beforeDestroy:function(){this.process&&this.process.stop()},computed:{...Object(n["c"])(["contactsMap","share"]),filteredListsEmpty:function(){return 0==_.reduce(this.filteredLists,(t,e)=>t+e.items.length,0)},filteredLists:function(){var t={};return _.each(this.lists,e=>{var a=this.getList(e.key);a.length&&(t[e.key]={items:a,section:e})}),t},filteredMessages(){let t=this.chats;var e=[];return this.search&&this.processresult&&_.each(this.processresult.results,(a,i)=>{var s=_.find(t,t=>t.roomId==i);s&&_.each(a,t=>{e.push({chat:s,messages:[t]})})}),e},filteredChats(){let t=this.chats;if(this.search){let e=_.filter(_.map(t,t=>{const e=this.core.mtrx.chatUsersInfo(t.roomId,"anotherChatUsers"),a=this.core.mtrx.client.getRoom(t.roomId),i=_.reduce(e,(t,e)=>t+e.name.toLowerCase(),"");let s="";var o;a&&"public"===a.getJoinRule()&&a.currentState.getStateEvents("m.room.name","").length>0&&(s=null===(o=a.currentState.getStateEvents("m.room.name","")[0])||void 0===o?void 0:o.getContent().name);s||(s=a.name,"#"===s[0]&&(s=""));const r=(s+i).toLowerCase();let n=0;return r.includes(this.search)&&(n=this.search.length/r.length),{chat:a,point:n}}),t=>t.point);e=_.sortBy(e,t=>t.point).reverse(),t=e.map(t=>t.chat.summary)}return t},filteredContacts(){return this.share?[]:(this.contacts=_.filter(this.contactsMap,t=>t.name.toLowerCase().includes(this.search.toLowerCase())),this.contacts)},filteredOther(){return this.users=_.filter(this.loadedUsers[this.search]||[],t=>t.id!==this.core.user.userinfo.id&&!_.filter(this.contactsMap,e=>e.id===t.id).length),this.users}},methods:{getList(t){return this["filtered"+(t.charAt(0).toUpperCase()+t.slice(1))]||[]},loadList(t){return this.getList(t)},itemClick(t,e={}){if(this.mode)return this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),void this.$store.commit("setiteraction",!0);if("navigateToProfile"==e.action&&this.navigateToProfile(t.id,t),"navigateToRoom"==e.action){var a=t;if(this.share){var i=this.share;this.$store.commit("SHARE",null),this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),this.core.mtrx.shareInChat(a.roomId,i).then(t=>{this.$store.commit("icon",{icon:"success",message:""}),this.$router.push(i.route||"chat?id="+a.roomId).catch(t=>{})}).catch(t=>{console.error(t),this.$store.commit("icon",{icon:"error",message:""}),i.route&&this.$router.push(i.route).catch(t=>{})})}else this.$router.push("chat?id="+a.roomId).catch(t=>{})}if("navigateToRoomFromMsg"==e.action){a=t.chat;var s=t.messages[0];this.$router.push("chat?id="+a.roomId+"&process="+this.processresult.id+"&search="+this.processresult.text+"&toevent="+s.event.event_id).catch(t=>{})}e.keepMatches||this.$emit("clearsearch")},navigateToProfile(t,e){"Select"===this.mode?this.select(e):this.$router.push({path:"/contact?id="+t}).catch(t=>{})},initSearchProcess(){if(!this.share)if(this.search.length>2){if(this.process)return void this.process.updateText(this.search);this.processresult=null,this.process=this.core.mtrx.searchEngine.execute(this.search,this.chats,({results:t})=>{var e=_.reduce(t,(t,e,a)=>t+e.length,0);if(e>25)return!0},{all:t=>{this.processresult=t}}),this.processing=!0,this.process.execute().then(()=>{}).catch(t=>{console.error(t)}).finally(()=>{this.processing=!1})}else this.process&&this.process.stop(),this.processresult=null},loadNewUsers(){if(!this.share)try{var t=(this.search||"").replace(/[^a-z0-9]/g,"");t.length>3&&(this.loadedingUsers[this.search]=this.core.user.searchContacts(t).then(t=>{this.$set(this.loadedUsers,this.search,t)}).catch(t=>{console.error(t)}).finally(()=>{this.$delete(this.loadedingUsers,this.search)}))}catch(e){console.error(e)}}},watch:{search:{immediate:!0,handler:function(){this.loadNewUsers(),this.share||this.initSearchProcess()}}}},u=m,v=a("2877");function f(t){var e=a("e716");e.__inject__&&e.__inject__(t)}var g=Object(v["a"])(u,h,l,!1,f,"29e16303",null,!0),b=g.exports,y=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active,mobile:t.mobile},attrs:{id:"teamroom"}},[e("div",{staticClass:"teamChatWrapper",on:{click:t.click}},[e("div",{staticClass:"iconWrapper"},[t._m(0),t.teamNotifications>0?e("div",{staticClass:"unseen"},[t._v(" "+t._s(t.teamNotifications)+" ")]):t._e()]),e("div",{staticClass:"infoWrapper"},[t._m(1),e("div",{staticClass:"previewMessage"},[t.pocketteammessages&&t.pocketteammessages.length>0?e("span",[t._v(" "+t._s(t.pocketteammessages[t.pocketteammessages.length-1].previewText)+" ")]):t._e()])])])])},w=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:"https://pocketnet.app/img/logo20.svg"}})])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"infoName"},[e("span",[t._v("Bastyon")])])}],x={name:"teamroom",props:{},data:function(){return{}},created:()=>{},watch:{},computed:Object(n["c"])({...Object(n["c"])(["minimized","active","pocketnet","pocketteammessages","readedteammessages"]),mobile:function(){return this.$store.state.mobile},teamNotifications:function(){var t=this;return _.filter(this.pocketteammessages,(function(e){return!t.readedteammessages[e.id]})).length}}),methods:{click:function(){this.$emit("click")}}},C=x;function k(t){var e=a("9ba4");e.__inject__&&e.__inject__(t)}var $=Object(v["a"])(C,y,w,!1,k,"7df18b93",null,!0),j=$.exports,z=a("3139"),L={name:"list",inject:["matches"],data:function(){return{loading:!1,enabled:!0,page:0,revealed:{},lastEventDescription:"",blocked:!1,globalsearch:""}},components:{preview:d["a"],AllContacts:b,dummypreviews:c["default"],teamroom:j},props:{user_data:{type:String,default:()=>{}},activeRoomId:{type:String,default:()=>{}},processid:""},beforeMount:function(){if(this.processid){var t=this.core.mtrx.searchEngine.getprocess(this.processid);t&&t.text&&(this.globalsearch=t.text)}},watch:{topchatid:function(){this.hmode&&this.$emit("scrolltop")},minimized:{immediate:!0,handler:function(){console.log("////"),this.globalsearch=""}}},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},computed:Object(n["c"])({window:function(){return window},auth:t=>t.auth,teamNotifications:function(){var t=this;return _.filter(this.pocketteammessages,(function(e){return!t.readedteammessages[e.id]})).length},...Object(n["c"])(["minimized","active","pocketnet","chatsready","prechats","chats","unauthorized","share","pocketteammessages","readedteammessages","deletedrooms","hideOptimization","wasunhidden"]),showchatslist:function(){return!this.hideOptimization},rooms:function(){return this.core.mtrx.client.getRooms()},empty:function(){return this.core.mtrx.ready&&0===this.chats.length},topchatid:function(){if(this.chats&&this.chats.length)return this.chats[this.chats.length-1].roomId},chats:function(t){var e=this,a=[];return _.each(t.chats,t=>{if(t.stream){const e=this.core.mtrx.client.getRoom(t.roomId),a=Date.now(),i=(()=>{const t=this.$store._vm.core.user.myMatrixId(),a=new Date(()=>-9007199254740991!==e.getLastActiveTimestamp()?e.getLastActiveTimestamp():e.getMember(t)?e.getMember(t).events.member.event.origin_server_ts:void 0);return a.setDate(a.getDate()+3),a.getTime()})(),s=a>i;s&&this.core.mtrx.client.leave(t.roomId).then(()=>{this.core.mtrx.client.forget(t.roomId,!0).catch(()=>{}),commit("DELETE_ROOM",t.roomId)})}if(!this.deletedrooms[t.roomId]&&!t.stream){this.core.mtrx.kit.tetatetchat(this.m_chat);var i=this.core.mtrx.chatUsersInfo(t.roomId,"anotherChatUsers");1===i.length&&i[0]&&e.core.mtrx.client.isUserIgnored(z["a"].getMatrixIdFull(i[0].id,e.core.domain))||a.push(t)}}),a=_.sortBy(a,(function(t){return t.lastModified})).reverse(),a},withoutBlockedChats:function(){var t=this;this.share&&_.map(t.chats,(function(t){}))},activeuser:function(){return this.core.user.userinfo},hmode(){return this.pocketnet&&this.minimized&&!this.active}}),methods:{getEventsAndDecrypt(t,e){return this.core.mtrx.kit.prepareChat(t).then(()=>Promise.all(_.map(e,e=>{var a=e.get();return a.decrypted||"m.encrypted"!==z["a"].deep(a,"event.content.msgtype")?Promise.resolve():t.pcrypto.decryptEvent(a).then(t=>(a.decrypted=t,Promise.resolve())).catch(t=>(t.decrypted={msgtype:"m.bad.encrypted"},Promise.resolve()))}))).then(()=>Promise.resolve(e))},invitepnt(){this.core.invitepnt()},generatekeys:function(){},moment(){return moment()},dd(t){},revealFirstRight(){this.$refs.list.revealRight(0)},revealFirstLeft(){this.$refs.list.revealLeft(0)},remove(t){this.$set(this.mockSwipeList,this.page,this.mockSwipeList[this.page].filter(e=>e!==t))},setLastEvent(t,{item:e,index:a}){this.lastEventDescription={name:t,index:a,id:e.id}},itemClick(t){if(this.hmode)this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),this.$store.commit("setiteraction",!0);else if(this.share){var e=this.share;this.$store.commit("SHARE",null),this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),this.core.mtrx.shareInChat(t.roomId,e).then(a=>{this.$store.commit("icon",{icon:"success",message:""}),setTimeout(()=>{this.$router.push(e.route||"chat?id="+t.roomId).catch(t=>{})},2e3)}).catch(t=>{console.error(t),this.$store.commit("icon",{icon:"error",message:""}),e.route&&this.$router.push(e.route).catch(t=>{})})}else this.$router.push("chat?id="+t.roomId).catch(t=>{})},fbClick(t){},sbClick(t){},openTeamRoom:function(){this.hmode?(this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"main"}),this.$store.commit("setiteraction",!0)):(setTimeout(()=>{this.$store.commit("SET_READEDTEAMMESSAGES",this.pocketteammessages),this.$store.commit("ALL_NOTIFICATIONS_COUNT",this.core.mtrx.client.getRooms())},500),this.$router.push("/teamroom").catch(t=>{}))},onKeyDown(t){16===t.keyCode&&(this.enabled=!1)},onKeyUp(t){16===t.keyCode&&(this.enabled=!0)},removeRoom(t){this.$dialog.confirm("Do you really want to leave room?",{okText:this.$i18n.t("yes"),cancelText:this.$i18n.t("cancel")}).then(e=>{this.core.mtrx.client.leave(t).then(e=>{this.core.mtrx.client.forget(t,!0).then(t=>t).then(e=>{this.$store.commit("DELETE_ROOM",t),this.$router.push({path:"/chats"}).catch(t=>{})})})})},tetatetchat(t){if(!t)return!0;var e=this.core.mtrx.client.getRoom(t.roomId);return!e||this.core.mtrx.kit.tetatetchat(this.core.mtrx.client.getRoom(t.roomId))},select:function(t){this.$emit("select",t)},toggleUser:function(t){if(this.selected[t])this.$delete(this.selected,t);else{if(this.selectedlength>=10)return void this.$store.commit("icon",{icon:"warning",message:"At the moment, you can add no more than 10 users to the chat"});this.$set(this.selected,t,t)}this.$emit("selectedUsers",this.selected)},shrinkResult(t,e){return t=[].concat(t),e&&t.length>e&&(t.length=e),t},itemToggle(t){this[t]=this[t]?null:2},searchall:function(t){this.globalsearch=(t||"").toLowerCase()}},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.hmode||this.$store.commit("SET_LAST_ROOM",null)}},T=L;function I(t){var e=a("d856");e.__inject__&&e.__inject__(t);var i=a("8509");i.__inject__&&i.__inject__(t)}var R=Object(v["a"])(T,o,r,!1,I,"b63c01ea",null,!0),O=R.exports,S=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatsTopheader"}},[e("topheader",{scopedSlots:t._u([{key:"left",fn:function(){return[t.share?e("div",{staticClass:"iconbutton",on:{click:t.cancelShare}},[e("i",{staticClass:"fas fa-times"})]):t._e(),t.minimized&&!t.active||!t.pocketnet||t.share?t._e():e("div",{staticClass:"iconbutton",on:{click:t.minimizeall}},[e("i",{staticClass:"fas fa-times"})]),t.pocketnet||t.share?t._e():e("div",{staticClass:"iconbutton",on:{click:t.gotoapp}},[e("i",{staticClass:"fas fa-angle-left"})])]},proxy:!0},{key:"leftadd",fn:function(){},proxy:!0},{key:"info",fn:function(){return[t.share?t._e():e("span",[t._v(t._s(t.$t("caption.chats")))]),t.share?e("span",[t._v(t._s(t.$t("caption.shareWith")))]):t._e()]},proxy:!0},{key:"rightadd",fn:function(){return[t.share?t._e():e("router-link",{attrs:{to:"settings"}},[e("div",{staticClass:"iconbuttonsmall"},[e("i",{staticClass:"fas fa-cog"})])])]},proxy:!0},{key:"right",fn:function(){return[t.share||t.minimized&&!t.active?e("div",[t.window.cordova?e("div",{staticClass:"iconbutton",on:{click:t.cordovashare}},[e("i",{staticClass:"fas fa-share-alt"})]):t._e()]):e("div",{staticClass:"iconbutton",on:{click:t.newchat}},[e("i",{staticClass:"fas fa-plus"})])]},proxy:!0}])})],1)},W=[],E={name:"chatsTopheader",props:{},inject:["matches"],components:{},data:function(){return{loading:!1,newchatopened:!1,createGroup:!1,contacts:!1}},created(){this.$store.commit("SET_CURRENT_ROOM","all")},destroyed(){this.$store.commit("SET_CURRENT_ROOM",!1)},watch:{},computed:Object(n["c"])({auth:t=>t.auth,minimized:t=>t.minimized,pocketnet:t=>t.pocketnet,active:t=>t.active,...Object(n["c"])(["share","closebybg"]),window:function(){return window}}),methods:{changeCloseByBg:function(){this.$store.commit("closebybg",!this.closebybg)},gotoapp:function(){this.core.backtoapp&&this.core.backtoapp()},cordovashare:function(){var t=this.share,e={};t.messages&&(e.message=t.messages.join(". ")),(t.images||t.files)&&(e.files=[].concat(t.images,t.files),e.files=_.filter(e.files,(function(t){return t}))),window.plugins&&window.plugins.socialsharing&&window.plugins.socialsharing.shareWithOptions(e),this.cancelShare()},cancelShare:function(){this.share&&this.share.route&&this.$router.push(this.share.route).catch(t=>{}),this.$store.commit("SHARE",null)},newchatmenu:function(){this.newchatopened=!this.newchatopened},minimizeall:function(){this.matches.clear(),this.$store.commit("minimize",!0)},newchat:function(){this.$emit("newchat")}}},M=E;function U(t){var e=a("7e83");e.__inject__&&e.__inject__(t)}var P=Object(v["a"])(M,S,W,!1,U,"73b35124",null,!0),N=P.exports,A=a("71da"),D=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatcreate"}},[e("div",{staticClass:"selecttype"},[e("div",{staticClass:"work"},[t.type?t._e():e("div",{staticClass:"types"},t._l(t.types,(function(a){return e("div",{key:a.id,staticClass:"type",on:{click:e=>t.selecttype(a.id)}},[e("div",{staticClass:"icon"},[e("i",{class:a.icon})]),e("div",[e("span",[t._v(t._s(t.$t("type."+a.id)))])])])})),0),t.type?e("div",{staticClass:"selectedtype"},[e("div",{staticClass:"icon",on:{click:t.unselecttype}},[e("i",{staticClass:"fas fa-arrow-left"})]),e("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("typelabel."+t.type.id))+" ")]),e("div",{staticClass:"completewrapper"},[e("button",{staticClass:"button small rounded",class:{orange:t.cancomplete,ghost:!t.cancomplete},on:{click:function(e){return t.complete()}}},[t._v(" "+t._s(t.$t("caption.create"))+" "),e("i",{class:t.type.icon}),t.selectedLength?e("span",{staticClass:"selectedLength"},[t._v(t._s(t.selectedLength))]):t._e()])])]):t._e()]),e("div",{staticClass:"creationbody"},[t.type?e("div",{staticClass:"groupsettigns"},[e("div",{staticClass:"namebuttoncreate"},[e("div",{staticClass:"groupNameInput"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],attrs:{type:"text",placeholder:"privategroup"===t.type.id?this.$i18n.t("caption.addGroupNamePlaceHolder"):this.$i18n.t("caption.addPublicChatName")},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}})])])])]):t._e(),t.type?t._e():e("div",{staticClass:"contactswrapper oneonone"},[e("contacts",{attrs:{mode:"Select"},on:{select:t.selectoneuser}})],1),t.type?e("div",{staticClass:"contactswrapper"},[e("contacts",{attrs:{mode:"Selectmany"},on:{selectedUsers:t.selectedUsers}})],1):t._e()])])])},B=[],F={name:"chatcreate",props:{},components:{contacts:A["a"]},data:function(){return{loading:!1,types:{privategroup:{id:"privategroup",icon:"fas fa-user-friends",value:"private"},publicgroup:{id:"publicgroup",icon:"fas fa-users",value:"public"}},type:null,groupName:"",selected:{}}},created:()=>{},watch:{},computed:Object(n["c"])({auth:t=>t.auth,cancomplete:function(){return!!this.type&&(!!("privategroup"==this.type.id&&this.groupName&&this.selectedLength>0)||!!("publicgroup"==this.type.id&&this.groupName&&this.selectedLength>0))},selectedLength:function(){return _.toArray(this.selected).length}}),methods:{unselecttype:function(){this.type=null,this.selected={}},selecttype:function(t){this.type=this.types[t],this.selected={}},selectedUsers:function(t){this.selected=t},selectoneuser:function(t){var e=this.core.mtrx.kit.tetatetid(t,this.core.user.userinfo);this.$router.push("chat?id="+e+"&u="+t.id).catch(t=>{})},complete(){this.createGroupAction(this.selected).then(t=>{this.$emit("completed",t),this.$store.commit("icon",{icon:"success",message:""})}).catch(t=>{var e="An unexpected error occurred";"cantcomplete"==t&&(e="Please enter a group name and add chat members"),this.$store.commit("icon",{icon:"error",message:e})})},createGroupAction(t){if(!this.cancomplete)return Promise.reject("cantcomplete");if(!this.type)return Promise.reject("type");if(_.isEmpty(t))return Promise.reject("users");const e=this.core.mtrx.kit.groupIdLight(t);return this.$store.state.globalpreloader=!0,this.core.mtrx.client.createRoom({visibility:this.type.value,invite:e.idForInviting,name:"@"+(this.groupName?this.groupName:"New Room"),initial_state:"publicgroup"==this.type.id?[{type:"m.room.guest_access",state_key:"",content:{guest_access:"can_join"}}]:[]}).then(t=>(this.$store.state.globalpreloader=!1,t)).catch(t=>(this.$store.state.globalpreloader=!1,Promise.reject(t)))}}},G=F;function K(t){var e=a("da51");e.__inject__&&e.__inject__(t)}var q=Object(v["a"])(G,D,B,!1,K,"48411756",null,!0),H=q.exports,J={name:"pagechats",components:{list:O,topheader:N,contacts:A["a"],chatcreate:H},props:{share:Object},data:function(){return{newChat:!1}},computed:Object(n["c"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,viewType:t=>t.viewType,mobile:t=>t.mobile,hiddenInParent:t=>t.hiddenInParent,joinroom:t=>t.joinroom,activeRoomId(){return this.$route.query.id},isOpenedChat(){return!!this.activeRoomId},processid(){return this.$route.query.process}}),methods:{newchat:function(){this.newChat=!0},closeNewChat:function(){this.newChat=!1},chatcreated:function(t){this.$router.push({path:"chat",query:{id:t.room_id}}).catch(t=>{})},scrolltop:function(){this.$refs["maincontent"].scroll(0)}},mounted(){this.joinroom&&(this.$router.push("/publicPreview?id="+this.joinroom),this.$store.commit("JOINROOM",null))}},X=J;function Q(t){var e=a("8fcc");e.__inject__&&e.__inject__(t);var i=a("a2eb");i.__inject__&&i.__inject__(t)}var V=Object(v["a"])(X,i,s,!1,Q,"19a57a53",null,!0);e["default"]=V.exports},"9ba4":function(t,e,a){"use strict";a.r(e);var i=a("9e80");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},"9e80":function(t,e,a){var i=a("8e32");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("9595ecfa",i,t)}},a2eb:function(t,e,a){"use strict";a.r(e);var i=a("62f7");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},a526:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".fade-enter-active[data-v-19a57a53]{transition:opacity .25s}.fade-enter[data-v-19a57a53],.fade-leave-to[data-v-19a57a53]{opacity:0}.topheader[data-v-19a57a53]{top:0;z-index:999}.newChat[data-v-19a57a53] #maincontent .headerSpacer,.newChat[data-v-19a57a53] #maincontent .headerSpacerWrapper,.newChat[data-v-19a57a53] #maincontent .headerSpacerWrapperOvf{overflow:visible!important}.newChat.minimized.active[data-v-19a57a53] #maincontent .desktopList{display:none}",""]),t.exports=e},a901:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"@media(min-width:1276px){.chats[data-viewType=split] .eventsflex,.chats[data-viewType=split] .noswipepnt .work{max-width:50vw!important}}.chats[data-viewType=split] .joinAction{position:sticky;bottom:0}@media(min-width:850px){.chats[data-viewType=split] .chat-topheader .leftIcon{display:none}.chats[data-viewType=split] .chat-topheader .work{margin:0;max-width:100%}}.chats[data-viewType=split] #ChatList{position:relative;height:100vh;border-right:1px solid rgb(var(--neutral-grad-0));width:var(--chat-list-width);min-width:var(--chat-list-width);max-width:var(--chat-list-width)}@media(min-width:850px){.chats[data-viewType=split] #ChatList #wai-fixedmessageicon{display:none!important}}@media(max-width:850px){.chats[data-viewType=split] #ChatList{--chat-list-width:100%}}@media(min-width:850px){.chats[data-viewType=split] #ChatList{--chat-list-width:34vw}}@media(min-width:1276px){.chats[data-viewType=split] #ChatList{--chat-list-width:25vw}}.chats[data-viewType=split] #ChatContent{position:relative;width:100%}@media(max-width:850px){.chats[data-viewType=split] #ChatContent{display:none;position:absolute;top:0;right:0;z-index:999;left:0;bottom:0}}.chats[data-viewType=single] #ChatPrompt{display:none}.chats[data-viewType=single].chats[data-is-opened-chat=true] #ChatContent{display:block}.chats[data-viewType=single].chats[data-is-opened-chat=true] #ChatList{display:none}@media(max-width:850px){.chats[data-is-opened-chat=true] #ChatContent{display:block}.chats[data-is-opened-chat=true] #ChatList{display:none}}",""]),t.exports=e},ad8e:function(t,e,a){var i=a("30cc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("2a68b25a",i,t)}},b410:function(t,e,a){var i=a("6985");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("be9237ea",i,t)}},c31b:function(t,e,a){var i=a("1af7");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("a4676524",i,t)}},d123:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".namebuttoncreate[data-v-48411756],.selectedtype[data-v-48411756],.type[data-v-48411756]{padding:1em;display:flex;align-items:center;border-bottom:1px solid rgb(var(--neutral-grad-0));white-space:nowrap;text-overflow:ellipsis;overflow:hidden;cursor:pointer}.namebuttoncreate .icon i[data-v-48411756],.selectedtype .icon i[data-v-48411756],.type .icon i[data-v-48411756]{width:30px;opacity:.7;font-size:.8em}.namebuttoncreate span[data-v-48411756],.selectedtype span[data-v-48411756],.type span[data-v-48411756]{font-size:.9em}.namebuttoncreate button[data-v-48411756],.selectedtype button[data-v-48411756],.type button[data-v-48411756]{white-space:nowrap;min-width:0!important}.namebuttoncreate input[data-v-48411756],.selectedtype input[data-v-48411756],.type input[data-v-48411756]{width:auto}.namebuttoncreate .completewrapper[data-v-48411756],.selectedtype .completewrapper[data-v-48411756],.type .completewrapper[data-v-48411756]{flex-grow:1;text-align:right}.namebuttoncreate .completewrapper .selectedLength[data-v-48411756],.selectedtype .completewrapper .selectedLength[data-v-48411756],.type .completewrapper .selectedLength[data-v-48411756]{margin-left:.5em}.namebuttoncreate[data-v-48411756]{padding-top:0;padding-bottom:0}.namebuttoncreate>div[data-v-48411756]{flex-grow:1}.namebuttoncreate input[data-v-48411756]{width:100%;padding-top:1em;padding-bottom:1em}.selectedtype[data-v-48411756]{background:rgb(var(--background-total-theme));position:sticky;top:-1px;z-index:12}.selectedtype .icon[data-v-48411756]{cursor:pointer;transition:.3s}.selectedtype .icon[data-v-48411756]:hover{opacity:.5}.selectedtype .label[data-v-48411756]{font-weight:700;font-size:.8em}.oneonone[data-v-48411756] .namebuttoncreate{display:none}.oneonone[data-v-48411756] .searchWrapperEA{background:rgb(var(--background-total-theme));position:sticky;top:-1px;z-index:12;padding-bottom:.5em}",""]),t.exports=e},d856:function(t,e,a){"use strict";a.r(e);var i=a("ad8e");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},da51:function(t,e,a){"use strict";a.r(e);var i=a("17f7");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)},e15c:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".toggleChatGroup[data-v-73b35124]{list-style:none;padding:0;margin:0;display:flex;justify-content:flex-start;align-items:center}.toggleChatGroup li[data-v-73b35124]{margin-right:10px;padding:10px 0}.logo20[data-v-73b35124]{width:20px;height:20px}.iconbuttonsmall[data-v-73b35124]{color:rgb(var(--neutral-grad-3))}.iconbuttonsmall.active[data-v-73b35124],.iconbuttonsmall[data-v-73b35124]:hover{color:rgb(var(--color-txt-ac))}.iconbuttonsmall.active[data-v-73b35124]:hover{color:rgb(var(--neutral-grad-3))}",""]),t.exports=e},e2ab:function(t,e,a){var i=a("a901");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("35d6").default;t.exports.__inject__=function(t){s("853bfa84",i,t)}},e716:function(t,e,a){"use strict";a.r(e);var i=a("c31b");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s)}}]);
//# sourceMappingURL=matrix-element.13.min.js.map