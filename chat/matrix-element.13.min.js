(window["matrixElement_jsonp"]=window["matrixElement_jsonp"]||[]).push([[13],{1905:function(t,e,a){var i=a("5854");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("2d1bf12c",i,t)}},"285a":function(t,e,a){"use strict";a.r(e);var i=a("1905");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},"42cd":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:{isBlocked:t.blocked},attrs:{id:"userViewPnuser"}},[t.userinfo.keys&&t.userinfo.keys.length?e("div",{staticClass:"haskeys"},[e("i",{staticClass:"fas fa-lock"})]):t._e(),e("div",{staticClass:"name"},[e("span",[t._v(" "+t._s(t.userinfo.name)+" ")])]),e("div",{staticClass:"imageWrapper"},[e("userpic",{attrs:{mode:"Contact",userinfo:t.userinfo,blocked:t.blocked}})],1),t.activeuser.id!=t.userinfo.id?e("div",{staticClass:"gotoprofile"},[e("button",{staticClass:"button small black rounded",on:{click:t.gotopocketnetprofile}},[t._v(" "+t._s(t.$t("button.goToPocketnetProfile"))+" ")])]):t._e(),e("div",{staticClass:"info"},[t.userinfo.source?e("div",{staticClass:"infoPart"},[e("div",{staticClass:"label"},[e("span",[t._v(" "+t._s(t.$t("caption.followers"))+" ")])]),e("div",{staticClass:"value"},[e("span",[t._v(t._s(t.userinfo.source.subscribers_count))])])]):t._e(),t.userinfo.source&&t.userinfo.source.reputation.toFixed?e("div",{staticClass:"infoPart"},[e("div",{staticClass:"label"},[e("span",[t._v(" "+t._s(t.$t("caption.reputation"))+" ")])]),e("div",{staticClass:"value"},[e("span",[t._v(t._s(t.userinfo.source.reputation.toFixed(1)))])])]):t._e(),t.userinfo.source?e("div",{staticClass:"infoPart"},[e("div",{staticClass:"label"},[e("span",[t._v(" "+t._s(t.$t("caption.following"))+" ")])]),e("div",{staticClass:"value"},[e("span",[t._v(t._s(t.userinfo.source.subscribes_count))])])]):t._e()])])},n=[],s=a("2f62"),r={name:"userViewPnuser",props:{userinfo:Object,blocked:!1},data:function(){return{loading:!1}},created:()=>{},watch:{},computed:Object(s["c"])({auth:t=>t.auth,activeuser:function(){return this.core.user.userinfo},href:function(){var t=window.pocketnetdomain||"pocketnet.app";return"https://"+t+"/"+this.userinfo.source.name}}),methods:{gotopocketnetprofile:function(){this.core.backtoapp?this.core.backtoapp(this.href):window.open(this.href,"_blank")}}},o=r,c=a("2877");function d(t){var e=a("bcad");e.__inject__&&e.__inject__(t)}var l=Object(c["a"])(o,i,n,!1,d,"975d943a",null,!0);e["a"]=l.exports},"492c":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".name[data-v-975d943a]{text-align:center}.name span[data-v-975d943a]{font-size:2em;font-weight:100}.gotoprofile[data-v-975d943a]{text-align:center;padding:1em;padding-top:0}.imageWrapper[data-v-975d943a]{padding:1em 0;padding-top:0;max-width:120px;margin:0 auto}.info[data-v-975d943a]{display:flex;padding:.5em;width:95%;border-radius:35px;background:rgb(var(--background-total-theme));margin:0 auto;margin-bottom:.5em;box-shadow:0 5px 5px -3px rgba(var(--color-shadow-base),.4)}.info .infoPart[data-v-975d943a]{width:33.3%;padding:.5em;text-align:center}.info .infoPart span[data-v-975d943a]{font-size:.8em}.info .infoPart .value[data-v-975d943a]{font-size:1.3em;font-weight:700}[data-v-975d943a] .userpic{width:120px;height:120px;line-height:120px;margin:0 auto}.haskeys[data-v-975d943a]{position:absolute;left:.5em;top:.5em;color:rgb(var(--color-good))}.haskeys i[data-v-975d943a]{font-size:.8em}",""]),t.exports=e},5854:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".caption[data-v-68c7ee2f]{padding:1em}.caption span[data-v-68c7ee2f]{font-size:1.5em;font-weight:700}.tip[data-v-68c7ee2f]{padding:1.5em;text-align:center}.tip span[data-v-68c7ee2f]{font-size:.8em}.blocked[data-v-68c7ee2f]{width:100%;text-align:center}.blocked span[data-v-68c7ee2f]{font-size:.9em}.joinAction[data-v-68c7ee2f]{position:fixed;bottom:0;left:0;right:0;background:rgb(var(--neutral-grad-0));padding:1em 0;text-align:center;z-index:3}.joinAction.bin[data-v-68c7ee2f]{position:sticky}.joinAction .actions[data-v-68c7ee2f]{display:flex}.joinAction .actions .action[data-v-68c7ee2f]{padding:.5em;flex-grow:1}.joinAction .actions .action button[data-v-68c7ee2f]{min-width:0;width:100%}.my-swipe[data-v-68c7ee2f]{height:200px;font-size:30px;text-align:center}.my-swipe[data-v-68c7ee2f],.slide1[data-v-68c7ee2f]{color:rgb(var(--text-on-bg-ac-color))}.slide1[data-v-68c7ee2f]{background-color:rgb(var(--color-bg-ac))}.slide2[data-v-68c7ee2f]{background-color:rgb(var(--color-bg-orange));color:#000}.slide3[data-v-68c7ee2f]{background-color:rgb(var(--color-bg-ac-2));color:rgb(var(--text-on-bg-ac-color))}.minimized:not(.active) .caption[data-v-68c7ee2f]{width:52px;text-align:center}.minimized:not(.active) .caption span[data-v-68c7ee2f]{color:rgb(var(--color-txt-ac));font-size:.6em}.minimized:not(.active) .chatPreview[data-v-68c7ee2f],.minimized:not(.active) .joinAction[data-v-68c7ee2f]{display:none}.minimized[data-v-68c7ee2f]:not(.active) .userinfoWrapper{background:transparent!important;box-shadow:none}.minimized[data-v-68c7ee2f]:not(.active) .haskeys{display:none}",""]),t.exports=e},"621d":function(t,e,a){var i=a("af38");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("5e52503b",i,t)}},"6eba":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".roomStatusView[data-v-2894938c]{height:50vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.roomStatusView .statusViewIcon i[data-v-2894938c]{color:rgb(var(--color-txt-ac));font-size:5em}.roomStatusView .text[data-v-2894938c]{margin:40px 0;color:rgb(var(--color-txt-ac))}",""]),t.exports=e},"7f89":function(t,e,a){var i=a("9c0c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("35bcfe56",i,t)}},8458:function(t,e,a){"use strict";a.r(e);var i=a("7f89");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},"86d6":function(t,e,a){var i=a("6eba");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("9fc04850",i,t)}},"891a":function(t,e,a){var i=a("b022");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("3081b22c",i,t)}},"9c0c":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".attachements[data-v-127f4274]{position:absolute;left:0;top:0;right:0;padding:.5em .5em;overflow-y:scroll}.attachements .attachementsWrapper[data-v-127f4274]{display:flex;align-items:center;flex-wrap:nowrap;flex-grow:1;flex-direction:row;margin-right:.5em;min-width:120px}.joinwrapper[data-v-127f4274]{position:absolute;left:0;top:0;bottom:0;right:0;padding-bottom:0;overflow-x:scroll}.cantchatmessage[data-v-127f4274]{padding:2em}.cantchatmessage .proceed[data-v-127f4274]{padding-top:1em}.cantchatmessage .proceed button[data-v-127f4274]{padding-left:0}.cantchatmessage .refresh[data-v-127f4274]{padding-top:2em}.cantchatmessage .msg[data-v-127f4274]{font-size:.8em}.encryptedInfo[data-v-127f4274]{position:relative;z-index:9999;display:flex;justify-content:center;align-items:center;flex-direction:column}.encryptedInfo #slide[data-v-127f4274]{padding:0 .5em;position:absolute;left:-180px;top:0;background:rgb(var(--background-main));color:rgb(var(--text-color));border-bottom-right-radius:8px;border-top-right-radius:8px;-webkit-animation:slide-127f4274 .1s forwards;-webkit-animation-delay:.3s;animation:slide-127f4274 .1s forwards;animation-delay:.3s;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}@keyframes slide-127f4274{to{left:0}}.encryptedInfo button[data-v-127f4274]{cursor:pointer;display:flex;align-items:center;justify-content:flex-start;text-align:left}.encryptedInfo button i[data-v-127f4274]{margin-right:5px}.encryptedInfo .encryptedTxtIcon[data-v-127f4274]{flex-direction:column;align-items:center;justify-content:center;padding:.25em .25em;text-align:center}.encryptedInfo .encryptedTxtIcon span[data-v-127f4274]{color:rgb(var(--color-good));font-size:.8em}.encryptedInfo .encryptedTxtIcon i[data-v-127f4274]{color:rgb(var(--color-good));display:none}.blockedcaption[data-v-127f4274]{text-align:center}.blockedcaption span[data-v-127f4274]{font-size:.8em}.relationEvent[data-v-127f4274]{display:flex;align-items:flex-end;width:100%}.relationEvent .relationEventWrapper[data-v-127f4274]{padding-bottom:1em}.relationEvent .relationEventCaption[data-v-127f4274]{padding:1em 0;padding-bottom:.5em}.relationEvent .relationEventCaption span[data-v-127f4274]{font-size:.8em;font-weight:700;color:rgb(var(--color-txt-ac))}.relationEvent .relationEventPreview[data-v-127f4274]{flex-grow:1;padding:0 1em;padding-top:0}.relationEvent[data-v-127f4274] .previewMessage{font-size:.9em}.relationEvent .relationEventActions[data-v-127f4274]{width:55px;min-width:55px}.relationEvent .relationEventActions .item[data-v-127f4274]{width:100%;padding:.5em 0;cursor:pointer;text-align:center}.chatInputWrapper[data-v-127f4274]{position:fixed;z-index:3;bottom:-1px;background:transparent;left:0;right:0;padding-bottom:35px;background:rgb(var(--background-total-theme));will-change:transform;transform:translate3d(0,calc(var(--keyboardheight, 0)*-1 - -1px),0);transition:.3s}.chatInputWrapper.bin[data-v-127f4274]{position:absolute;left:1px;right:1px;bottom:0;border-radius:5px}#chat.minimized .chatInputWrapper[data-v-127f4274]{opacity:0;padding-bottom:0}#chat.minimized:not(.active) .statusWrapper[data-v-127f4274]{width:33px}#chat.minimized:not(.active) .statusWrapper i[data-v-127f4274]{color:rgb(var(--color-txt-ac))}#chat.minimized:not(.active) .statusWrapper i span[data-v-127f4274]{display:none}#chat.minimized:not(.active) .statusWrapper .messageRow[data-v-127f4274]{padding:0!important;background:transparent!important}#chat.minimized:not(.active) .statusWrapper .event[data-v-127f4274]{padding-bottom:.5em}#chat.minimized:not(.active) .statusWrapper #events[data-v-127f4274]{transform:translate3d(.25em,30px,0)}#chat.minimized:not(.active) .statusWrapper .iconWrapper[data-v-127f4274]{margin-left:0!important}#chat.minimized:not(.active) .statusWrapper [my=true][data-v-127f4274]{justify-content:flex-start}#chat.minimized:not(.active) .statusWrapper [my=true] .iconWrapper[data-v-127f4274]{margin-left:0!important;order:-1;align-self:flex-end}#chat.minimized:not(.active) .statusWrapper .actionsWrapper[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .filePreview[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .labelwrapper[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .linkPreview[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .maxcontent[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .messageImg[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .timeWrapper[data-v-127f4274],#chat.minimized:not(.active) .statusWrapper .userpic[data-v-127f4274]:after{display:none}#chat.minimized.active[data-v-127f4274]{padding-bottom:90px}#chat.minimized.active .chatInputWrapper[data-v-127f4274]{opacity:1}.encrypted[data-v-127f4274]{position:absolute;left:0;top:0;z-index:2;color:rgb(var(--color-good));padding:.25em .5em}.encrypted i[data-v-127f4274]{font-size:.8em;cursor:pointer}.roomMuted[data-v-127f4274]{position:absolute;left:5px;top:20px;z-index:2;color:rgb(var(--neutral-grad-3))}.roomMuted i[data-v-127f4274]{font-size:.8em}.chatEmpty[data-v-127f4274]{padding:4em;text-align:center;color:rgb(var(--neutral-grad-3))}.chatEmpty span[data-v-127f4274]{font-size:.8em}.preview-wrapper[data-v-127f4274]{max-height:350px;overflow-y:auto;border:1px solid rgb(var(rgb(var(--neutral-grad-2))));border-radius:10px;margin:0 auto;width:98%}.preview-wrapper[data-v-127f4274]::-webkit-scrollbar{width:0!important}.shareEventsWrapper .cnt[data-v-127f4274]{background:rgb(var(--background-secondary-theme));border-radius:30px;padding:.5em 1em;max-width:622px;width:100%;margin:0 auto;display:flex;align-items:center;justify-content:space-between;font-size:.9em}.shareEventsWrapper .cnt i[data-v-127f4274]{margin-right:10px}.shareEventsWrapper .cnt i.fa-trash-alt[data-v-127f4274]{color:#f41a4d}.shareEventsWrapper .cnt i.fa-share-alt[data-v-127f4274]{color:#00a3f7}.shareEventsWrapper .cnt div[data-v-127f4274]{transition:.3s;opacity:.6;cursor:pointer;margin-left:1em;display:flex;align-items:center}.shareEventsWrapper .cnt div[data-v-127f4274]:hover{transition:.3s;opacity:1}.shareEventsWrapper .cnt div.cancel[data-v-127f4274]{margin-right:auto;margin-left:0}",""]),t.exports=e},af38:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#chatAttachement[data-v-bd3aba00]{height:90px;width:120px;border-radius:5px;overflow:hidden;position:relative;background:rgb(var(--background-secondary-theme))}#chatAttachement>div[data-v-bd3aba00]{width:100%;height:100%}.cancel[data-v-bd3aba00],.loading[data-v-bd3aba00]{position:absolute;height:90px;width:120px;line-height:90px;text-align:center;font-size:3em;left:0;top:0;background:rgba(var(--background-main),.8);color:rgba(var(--text-color),.2)}.cancel[data-v-bd3aba00]{background:transparent;font-size:1.2em;color:rgb(var(--text-color))}.file[data-v-bd3aba00]{text-align:center;font-size:.8em;padding-top:1em}.file span[data-v-bd3aba00]{white-space:normal}.file .fileicon i[data-v-bd3aba00]{opacity:.4;font-size:1.5em}.image[data-v-bd3aba00],.image .bgimage[data-v-bd3aba00]{width:100%;height:100%}",""]),t.exports=e},b022:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".userinfoWrapper[data-v-1eac96bc]{height:95%;width:100%;padding:2em .5em;background:rgba(var(--background-main),.4);border-radius:15px;position:relative;box-shadow:0 5px 7px -5px rgba(var(--color-shadow-base),.7)}.previewWrapper .work[data-v-1eac96bc]{padding-bottom:.5em!important}.VueCarousel[data-v-1eac96bc]{width:100%}.filter[data-v-1eac96bc]{background-color:rgba(var(--color-shadow-base),.2)!important}",""]),t.exports=e},b163:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:{bin:t.pocketnet,bout:!t.pocketnet,minimized:t.minimized,fix:t.pocketnet,active:t.active},attrs:{id:"chat"}},[t.cantchat&&!t.cantchatexc?e("div",{staticClass:"cantchatmessage"},[e("div",{staticClass:"msg"},[t._v(" "+t._s(t.$t("caption."+this.keyproblem))+" ")]),"usernotgen"==t.keyproblem?e("div",{staticClass:"refresh"},[e("button",{staticClass:"button small",on:{click:t.refreshkeys}},[t._v(" Refresh "),e("i",{staticClass:"fas fa-sync"})])]):t._e(),"younotgen"==t.keyproblem?e("div",{staticClass:"preloaderwrapper"},[e("linepreloader")],1):t._e()]):e("div",{staticClass:"chatcontent"},[t.m_chat&&"join"===t.membership&&t.ready?e("list",{key:t.key,ref:"list",attrs:{error:t.error,chat:t.m_chat,searchresults:t.searchresults,selectedMessages:t.selectedMessages},on:{editingEvent:t.editingEvent,shareEvent:t.shareEvent,replyEvent:t.replyEvent,eventImage:e=>t.galleryImage(e),scroll:t.scroll,menuIsVisible:t.menuIsVisibleHandler,getEvents:t.events}}):t._e(),t.m_chat&&"invite"===t.membership?e("div",{staticClass:"joinwrapper"},[e("join",{attrs:{m_chat:t.m_chat,chat:t.chat,usersinfo:t.usersinfo},on:{creatorLeft:t.brokenInvitedRoom}})],1):t._e(),!t.m_chat&&t.usersinfo&&t.usersinfo.length?e("div",{staticClass:"chatEmpty"},[e("span",[t._v(t._s(t.$t("caption.startChatWith"))+" "+t._s(t.usersinfoNames()))])]):t._e(),t.m_chat&&"join"!==t.membership?t._e():e("div",{staticClass:"chatInputWrapper fixedOnPageBottom",class:{bin:t.pocketnet,bout:!t.pocketnet}},[e("div",[t.relationEvent?e("div",{staticClass:"relationEvent"},[e("div",{staticClass:"relationEventPreview"},[e("div",{staticClass:"relationEventCaption"},[e("span",[t._v(t._s(t.relationEvent.action))])]),"m.replace"!=t.relationEvent.type?e("div",{staticClass:"relationEventWrapper"},[e("eventsEvent",{attrs:{event:t.relationEvent.event,chat:t.m_chat,preview:!0}})],1):t._e()]),e("div",{staticClass:"relationEventActions"},[e("div",{staticClass:"item",on:{click:t.clearRelationEvent}},[e("i",{staticClass:"far fa-times-circle"})])])]):t._e(),t.blockedUser||t.selectedMessages.length?t._e():e("chatInput",{ref:"chatInput",attrs:{u:t.u,chat:t.m_chat,usersinfo:t.usersinfo,relationEvent:t.relationEvent},on:{sending:t.sending,sent:t.sent,sentError:t.sentError,sentMessageError:t.sentMessageError,sendingData:t.sendingData,sentData:t.sentData,force:t.force,newchat:t.newchat,closeMetaPreview:t.closing,clearRelationEvent:t.clearRelationEvent,focused:t.focused,cantchatcrypto:t.cantchatcrypto,encrypt:t.clbkencrypt,encrypted:t.clbkencrypted}}),t.selectedMessages.length?e("div",{staticClass:"center shareEventsWrapper"},[e("div",{staticClass:"work"},[e("div",{staticClass:"cnt"},[e("div",{staticClass:"cancel",on:{click:function(e){return t.cancelDataMessages()}}},[e("i",{staticClass:"fas fa-times"}),e("span",[t._v(t._s(t.$t("cancel")))])]),e("div",{on:{click:function(e){return t.removeDataMessages()}}},[e("i",{staticClass:"far fa-trash-alt"}),e("span",[t._v(t._s(t.localisationTitles.delete))])]),e("div",{on:{click:function(e){return t.shareDataMessages()}}},[e("i",{staticClass:"fas fa-share-alt"}),e("span",[t._v(t._s(t.localisationTitles.share))])])])])]):t._e(),t.blockedUser&&t.m_chat?e("div",{staticClass:"blockedcaption"},[e("span",[t._v("You have blocked this user")])]):t._e()],1)]),t.encrypted&&"invite"!=t.membership?e("div",{staticClass:"encrypted fixedOnPageTop",on:{mouseover:e=>t.hoverEncrypt=!0}},[t.encrypting?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-lock"})]):t._e(),t.hoverEncrypt?e("div",{staticClass:"encryptedInfo fixedOnPageTop",on:{mouseover:e=>t.hoverEncrypt=!0,mouseleave:e=>t.hoverEncrypt=!1,click:e=>t.hoverEncrypt=!t.hoverEncrypt}},[e("div",{attrs:{id:"slide"}},[e("div",{staticClass:"encryptedTxtIcon"},[e("i",{staticClass:"fas fa-user-shield"}),e("span",[t._v(t._s(t.$t("caption.encrypted")))])])])]):t._e(),t.attachements.length?e("div",{staticClass:"attachements"},[e("div",{staticClass:"attachementsWrapper"},t._l(t.attachements,(function(a){return e("attachement",{key:a.id,attrs:{attachement:a},on:{cancel:e=>t.abortSending(a.id)}})})),1)]):t._e()],1),t.roomUserBanned?e("userRoomStatus",{attrs:{chat:t.chat,text:"You've have been banned in this room"}}):t._e()],1)},n=[],s=a("2f62"),r=a("4e29"),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"maskedtop",class:{minimized:t.minimized,active:t.active},attrs:{id:"chatJoin"}},[e("div",{staticClass:"work"},[e("div",{staticClass:"caption"},[t.creatorLeft?t._e():e("span",[t._v(" "+t._s(t.$t("caption.chatInvite"))+" ")]),t.creatorLeft?e("span",[t._v(t._s(t.$t("caption.cantJoin")))]):t._e()])]),t.blockedCheck?t._e():e("div",{staticClass:"tip"},[t.creatorLeft?t._e():e("span",[t._v(t._s(t.$t("caption.chatInviteDecline")))]),t.creatorLeft?e("span",[t._v(t._s(t.$t("caption.creatorLeft")))]):t._e()]),e("chatPreview",{attrs:{usersinfo:t.usersinfo,chat:t.chat,m_chat:t.m_chat,undefinedRoom:t.creatorLeft}}),t.hiddenInParent?t._e():e("div",{staticClass:"joinAction fixedOnPageBottom",class:{bin:t.pocketnet,bout:!t.pocketnet}},[e("div",{staticClass:"work"},[t.blockedCheck?e("div",{staticClass:"actions"},[t._m(0)]):e("div",{staticClass:"actions"},[t.creatorLeft||t.tetatet?t._e():e("div",{staticClass:"action"},[e("button",{staticClass:"small button black rounded",on:{click:t.decline}},[t._v(" "+t._s(t.$t("button.decline"))+" ")])]),t.tetatet?e("div",{staticClass:"action"},[e("button",{staticClass:"small button black rounded",on:{click:t.ignore}},[t._v(" "+t._s(t.$t("button.declineandignore"))+" ")])]):t._e(),t.creatorLeft?t._e():e("div",{staticClass:"action"},[e("button",{staticClass:"small button rounded",on:{click:t.join}},[t._v(" "+t._s(t.$t("button.join"))+" ")])]),t.creatorLeft?e("div",{staticClass:"action"},[e("button",{staticClass:"small button rounded",on:{click:t.back}},[t._v(" "+t._s(t.$t("button.ok"))+" ")])]):t._e()])])])],1)},c=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"blocked"},[e("span",[t._v("You have blocked this user")])])}],d=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"chatPreview"},[e("div",{staticClass:"work"},[e("div",{staticClass:"previewWrapper"},[t.users&&t.users.length?e("div",{staticClass:"users"},t._l(t.users,(function(a){return t.empty(a)?t._e():e("div",{key:a.id,staticClass:"work"},[e("div",{staticClass:"userinfoWrapper",class:{filter:t.undefinedRoom}},[a.name?e("userView",{attrs:{userinfo:a}}):t._e()],1)])})),0):t._e()])])])},l=[],h=a("aa20"),f=a("3094"),p=a("42cd"),u=a("7212"),m=a("0a63"),v={name:"chatPreview",props:{chat:Object,usersinfo:Array,room:{},undefinedRoom:!1},components:{userView:p["a"],chatName:h["a"],chatIcon:f["a"],Swiper:u["Swiper"],SwiperSlide:u["SwiperSlide"],Carousel:m["Carousel"],Slide:m["Slide"]},data:function(){return{loading:!1,swiperOption:{direction:"horizontal",pagination:{el:".swiper-pagination"}}}},computed:{users:function(){return this.chat?this.core.mtrx.chatUsersInfo(this.chat.roomId,"anotherChatUsers"):[]}},methods:{empty:function(t){return _.isEmpty(t)}}},g=v,b=a("2877");function x(t){var e=a("f833");e.__inject__&&e.__inject__(t)}var y=Object(b["a"])(g,d,l,!1,x,"1eac96bc",null,!0),k=y.exports,w={name:"chatJoin",props:{chat:Object,m_chat:{},usersinfo:Array,room:Object},components:{chatPreview:k},data:function(){return{loading:!1,joinedMembers:[],creatorLeft:!1}},created:()=>{},watch:{},computed:Object(s["c"])({hiddenInParent:t=>t.hiddenInParent,auth:t=>t.auth,pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,tetatet:function(){return this.core.mtrx.kit.tetatetchat(this.m_chat)},blockedCheck:function(){var t=this.core.mtrx.anotherChatUsers(this.m_chat.roomId);if(1==t.length)return this.core.mtrx.blockeduser(t[0].userId)}}),mounted:function(){},methods:{join:function(){var t=this;this.$store.commit("SET_CHAT_TO_FORCE",this.m_chat.roomId),this.core.mtrx.client.joinRoom(this.m_chat.roomId).then(()=>{this.$emit("joined")}).catch((function(e){return t.brokenRoom(!0),t.creatorLeft=!0}))},back(){this.$router.go(-1)},ignore:function(){var t=this.core.mtrx.anotherChatUsers(this.chat.roomId);t.length>1||this.core.mtrx.blockUser(t[0].userId).then(t=>{this.$router.go(-1)}).catch(t=>{})},decline:function(){this.$store.commit("SET_CHAT_TO_FORCE",this.m_chat.roomId),this.core.mtrx.client.leave(this.chat.roomId).then(t=>{this.core.mtrx.client.forget(this.chat.roomId,!0).then(t=>t).then(t=>{this.$store.commit("DELETE_ROOM",this.chat.roomId),this.$router.go(-1)})})},brokenRoom(){this.$emit("creatorLeft",!0)}}},C=w;function E(t){var e=a("285a");e.__inject__&&e.__inject__(t)}var I=Object(b["a"])(C,o,c,!1,E,"68c7ee2f",null,!0),z=I.exports,j=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"chatAttachement"}},["image"==t.attachement.type?e("div",{staticClass:"image"},[t.attachement.base64?e("bgimage",{attrs:{src:t.attachement.base64}}):t._e()],1):t._e(),"file"==t.attachement.type?e("div",{staticClass:"file"},[e("div",{staticClass:"fileicon"},[e("i",{class:t.fileicon})]),e("div",{staticClass:"filename"},[e("span",[t._v(t._s(t.attachement.info.name||"File"))])]),t.humanReadableSize?e("div",{staticClass:"filesize"},[e("span",[t._v(t._s(t.humanReadableSize))])]):t._e()]):t._e(),t._m(0),e("div",{staticClass:"cancel",on:{click:t.cancel}},[e("i",{staticClass:"far fa-times-circle"})])])},$=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"loading"},[e("i",{staticClass:"fas fa-spinner fa-spin"})])}],M=a("3139"),O={name:"chatAttachement",props:{attachement:Object},data:function(){return{loading:!1,ext:{pdf:"far fa-file-pdf",custom:"far fa-file"}}},created:()=>{},watch:{},computed:Object(s["c"])({auth:t=>t.auth,extension:function(){if(!M["a"].deep(this,"attachement.info.name"))return"custom";var t=M["a"].deep(this,"attachement.info.name"),e=(t=t.split("."),t[t.length-1].toLowerCase());return e},humanReadableSize(){return M["a"].deep(this,"attachement.info.size")?M["a"].formatBytes(this.attachement.info.size):""},fileicon:function(){var t=this.extension;return this.ext[t]||this.ext["custom"]}}),methods:{cancel:function(){this.$emit("cancel")}}},W=O;function P(t){var e=a("c63d");e.__inject__&&e.__inject__(t)}var R=Object(b["a"])(W,j,$,!1,P,"bd3aba00",null,!0),S=R.exports,T=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"roomStatusView"},[t._m(0),e("div",{staticClass:"text"},[t._v(" "+t._s(t.text)+" ")]),e("button",{staticClass:"button small black rounded",on:{click:function(e){return t.leaveRoom()}}},[t._v(" Delete room ")])])},A=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"statusViewIcon"},[e("i",{staticClass:"fas fa-ban"})])}],D=(a("14d9"),{props:{text:String,chat:Object},methods:{leaveRoom(){this.core.mtrx.client.forget(this.chat.roomId,!0).then(t=>{this.$store.commit("DELETE_ROOM",this.chat.roomId)}).then(t=>{this.$router.push({path:"/chats"}).catch(t=>{})})}}}),L=D;function U(t){var e=a("e404");e.__inject__&&e.__inject__(t)}var V=Object(b["a"])(L,T,A,!1,U,"2894938c",null,!0),B=V.exports,N={name:"chat",props:{chat:Object,u:String,search:String,searchresults:Array,style:""},components:{list:r["a"],chatInput:()=>Promise.all([a.e(24),a.e(11)]).then(a.bind(null,"fe01")),join:z,attachement:S,userRoomStatus:B},data:function(){return{roomUserBanned:!1,roomUserKicked:!1,roomMuted:!1,loading:!1,ready:!1,encrypted:!1,usersinfo:[],chatEvents:{},relationEvent:null,key:"",sendingDataStore:{},esize:{},fsize:{},cantchat:!1,cantchatexc:!1,error:null,hoverEncrypt:!1,encrypting:!1,showInput:!0,showShareMessages:!1,selectedMessages:[]}},created(){},mounted(){this.getuserinfo(),this.$store.commit("active",!0),this.$store.commit("blockactive",{value:!0,item:"chat"})},destroyed(){this.$store.commit("blockactive",{value:!1,item:"chat"}),this.$store.commit("SET_CURRENT_ROOM",!1),this.clearintrv()},watch:{needcreatekey:function(){this.needcreatekey?this.intrv||(this.intrv=setInterval(()=>{this.refreshkeys(!0)},2e4)):this.clearintrv()},chatusers:function(){this.m_chat&&this.m_chat.pcrypto&&this.m_chat.pcrypto.userschanded().then(t=>{this.checkcrypto()})},m_chat:{immediate:!0,handler:function(){this.m_chat&&!_.isEmpty(this.m_chat)&&this.core.mtrx.kit.allchatmembers([this.m_chat],!1,!0).then(t=>this.core.mtrx.kit.prepareChat(this.m_chat)).then(t=>{this.ready=!0,this.checkcrypto()})}},chat:{immediate:!0,handler:function(){this.ready=!1,this.encrypted=!1,this.$store.commit("setmodal",null),this.chat?(this.$store.commit("SET_CURRENT_ROOM",this.chat.roomId),this.$store.commit("SET_LAST_ROOM",this.chat.roomId)):this.$store.commit("SET_CURRENT_ROOM",!1)}}},computed:Object(s["c"])({pocketnet:t=>t.pocketnet,minimized:t=>t.minimized,active:t=>t.active,auth:t=>t.auth,m_chat:function(){if(this.chat&&this.chat.roomId){let e=this.core.mtrx.client.pushProcessor.getPushRuleById(this.chat.roomId);null!==e&&(this.roomMuted=!0);var t=this.core.mtrx.client.getRoom(this.chat.roomId);return t||{}}},keyproblem:function(){return this.core.user.userinfo.keys.length<12?"younotgen":"usernotgen"},needcreatekey:function(){return"younotgen"==this.keyproblem&&this.cantchat&&!this.cantchatexc},membership:function(){if(this.m_chat){if(this.m_chat.timeline.length>0){var t=this.core.mtrx.client.credentials.userId,e=this.m_chat.timeline[this.m_chat.timeline.length-1];e.event.state_key===t&&"admin ban"===e.event.content.reason&&(this.roomUserBanned=!0)}return this.m_chat.getMyMembership()}},blockedUser:function(){if(this.u)return this.core.mtrx.blockeduser(this.u[0]);if(this.chat){var t=this.core.mtrx.anotherChatUsers(this.chat.roomId);if(1===t.length)return this.core.mtrx.blockeduser(t[0].userId)}},openInviteModal:function(){return this.openInviteModal},attachements:function(){return _.toArray(this.sendingDataStore)},chatusers:function(){if(this.m_chat)return this.core.store.state.chatusers[this.m_chat.roomId]},localisationTitles:function(){return this.$i18n.t("button")}}),methods:{clearintrv:function(){this.intrv&&(clearInterval(this.intrv),this.intrv=null)},clbkencrypt:function(){this.encrypting=!0},clbkencrypted:function(){this.encrypting=!1},checkcrypto:function(){this.encrypted=this.m_chat.pcrypto.canBeEncrypt(),this.cantchat=this.m_chat.pcrypto.cantchat()},force:function(){this.key=M["a"].makeid()},clearRelationEvent:function(){this.relationEvent&&"m.replace"===this.relationEvent.type&&this.$refs["chatInput"]&&this.$refs["chatInput"].setText(""),this.relationEvent=null},newchat:function(t){this.$emit("newchat",t),this.m_chat.pcrypto.userschanded()},getuserinfo:function(){this.u&&this.core.user.usersInfo(this.u).then(t=>{this.usersinfo=t})},cantchatcrypto:function(){this.cantchat=!0},proceedwithoutkeys:function(){this.cantchatexc=!0},refreshkeys:function(){this.core.user.userInfo(!0).then(t=>{this.u?this.core.user.usersInfo(this.u,!1,!0).then(t=>{var e=t[0];e&&e.keys&&e.keys.length>=12&&this.core.user.userinfo.keys.length>=12&&(this.cantchat=!1),this.usersinfo=t}):this.core.store.dispatch("RELOAD_CHAT_USERS",[this.m_chat]).then(t=>{})})},closing:function(t){this.PNmetaPreview=t},usersinfoNames:function(){return _.map(this.usersinfo,(function(t){return t.name})).join(", ")},replyEvent:function(t){let{event:e}=t;this.relationEvent={type:"m.reference",event:e,action:this.$i18n.t("caption.replyOnMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].focus()},shareEvent:function(t){let{event:e}=t;this.relationEvent={type:"m.reference",event:e,action:this.$i18n.t("caption.shareMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].focus()},editingEvent:function(t){let{event:e,text:a}=t;this.relationEvent={type:"m.replace",event:e,action:this.$i18n.t("caption.editMessage")},this.$refs["chatInput"]&&this.$refs["chatInput"].setText(a)},focused:function(){this.fsize=_.clone(this.esize)},scroll(t){this.esize=t;var e=this.esize.scrollTop||0,a=this.fsize.scrollTop||0;e-450>a&&this.$refs["chatInput"]&&this.$refs["chatInput"].blurifempty()},events(t){this.$emit("getEvents",t),this.chatEvents=t},galleryImage(t){this.core.store.dispatch("SHOW_GALLERY_FROMEVENTS",{events:this.chatEvents,event:t})},sending:function(){this.$emit("sending"),this.$refs["list"].scrollToNew(0)},sent:function(){this.relationEvent&&"m.reference"===this.relationEvent.type&&(this.relationEvent=null),this.$emit("sent"),this.error=null},sendingData:function(t){this.$set(this.sendingDataStore,t.id,t)},sentData:function(t){this.clearMeta(t),this.error=null},sentError:function(t){t&&t.id&&this.clearMeta(t),t&&t.error&&(this.error=t.error)},sentMessageError:function(t){this.error=t.error,this.core.logerror("sentMessageError",M["a"].stringify(this.error))},abortSending:function(t){var e=this.sendingDataStore[t];e.abort&&e.abort(),e.aborted=!0,this.clearMeta(e)},brokenInvitedRoom(t){this.$emit("removeBrokenRoom",t)},clearMeta:function(t){this.$delete(this.sendingDataStore,t.id)},menuIsVisibleHandler:function(t){this.$emit("menuIsVisible",t)},shareDataMessages:function(){var t=_.map(_.sortBy(this.selectedMessages,t=>t.time),t=>t.sharing);this.core.share({multiple:t}).then(()=>{this.selectedMessages=[]})},removeDataMessages:function(){this.$store.commit("icon",{icon:"loading",message:"",manual:!0}),Promise.all(_.map(this.selectedMessages,t=>this.core.mtrx.client.redactEvent(this.chat.roomId,t.message_id,null,{reason:"messagedeleting"}))).then(t=>{this.$store.commit("icon",{icon:"success",message:""}),this.selectedMessages=[]}).catch(t=>{console.error(t),this.selectedMessages=[],this.$store.commit("icon",{icon:"error",message:""})}).finally(()=>{this.force()})},cancelDataMessages:function(){this.selectedMessages=[]},scrollToEvent:function(t){M["a"].pretry(()=>this.$refs["list"]).then(()=>{this.$refs["list"].scrollToEvent(t)})}}},F=N;function H(t){var e=a("8458");e.__inject__&&e.__inject__(t)}var Y=Object(b["a"])(F,i,n,!1,H,"127f4274",null,!0);e["default"]=Y.exports},bcad:function(t,e,a){"use strict";a.r(e);var i=a("dc2d");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},c63d:function(t,e,a){"use strict";a.r(e);var i=a("621d");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},dc2d:function(t,e,a){var i=a("492c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("35d6").default;t.exports.__inject__=function(t){n("0fd6bed3",i,t)}},e404:function(t,e,a){"use strict";a.r(e);var i=a("86d6");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)},f833:function(t,e,a){"use strict";a.r(e);var i=a("891a");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n)}}]);
//# sourceMappingURL=matrix-element.13.min.js.map